import{_ as d,t as r,v as a,L as _,M as h,x as t,C as v,D as x,N as k,O as y,B as L,P as R,y as b,z as g}from"./entry.D_EqDczB.js";const $={props:{modelValue:{type:Number,default:null}},emits:["update:modelValue"],data(){return{resistance:this.modelValue}},watch:{resistance(e){localStorage.setItem("targetResistance",JSON.stringify(e)),this.$emit("update:modelValue",parseFloat(e))}}},N=e=>(v("data-v-648000fe"),e=e(),x(),e),M={class:"input-container"},O=N(()=>t("h2",null,"Target resistance",-1));function E(e,s,l,p,n,i){return r(),a("div",M,[O,_(t("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>n.resistance=o),class:"input-field",type:"number",min:"0.01",step:"0.01"},null,512),[[h,n.resistance]])])}const w=d($,[["render",E],["__scopeId","data-v-648000fe"]]),J={props:{modelValue:{type:Number,default:null}},emits:["update:modelValue"],data(){return{maxResistors:this.modelValue}},watch:{maxResistors(e){localStorage.setItem("maxResistors",JSON.stringify(e)),this.$emit("update:modelValue",parseInt(e))}}},T=e=>(v("data-v-5df5ddc0"),e=e(),x(),e),W={class:"input-container"},U=T(()=>t("h2",null,"Max resistors",-1));function B(e,s,l,p,n,i){return r(),a("div",W,[U,_(t("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>n.maxResistors=o),class:"input-field",type:"number",min:"1",step:"1"},null,512),[[h,n.maxResistors]])])}const C=d(J,[["render",B],["__scopeId","data-v-5df5ddc0"]]),z={props:{modelValue:{type:Array,default:()=>[0]}},emits:["update:modelValue"],data(){return{resistors:this.modelValue,e12:[1,1.2,1.5,1.8,2.2,2.7,3.3,3.9,4.7,5.6,6.8,8.2],currentE12Index:JSON.parse(localStorage.getItem("currentE12Index")||1)}},watch:{resistors:{handler(){this.$emit("update:modelValue",this.resistors)},deep:!0}},methods:{addResistor(){this.resistors.push(this.e12[this.currentE12Index]),localStorage.setItem("resistors",JSON.stringify([...new Set(this.resistors)])),this.$emit("update:modelValue",this.resistors),this.currentE12Index<this.e12.length-1?this.currentE12Index++:this.currentE12Index=0,localStorage.setItem("currentE12Index",JSON.stringify(this.currentE12Index))},removeResistor(e){this.resistors.length>1&&(this.resistors.splice(e,1),localStorage.setItem("resistors",JSON.stringify([...new Set(this.resistors)])),this.$emit("update:modelValue",this.resistors))}}},f=e=>(v("data-v-ae62d85a"),e=e(),x(),e),A=f(()=>t("h2",null,"Resistor values",-1)),F={id:"list"},D=["onUpdate:modelValue"],H=["onClick"],j=f(()=>t("g",null,[t("g",null,[t("path",{d:"M500,10C229.3,10,10,229.4,10,500s219.3,490,490,490c270.7,0,490-219.4,490-490S770.7,10,500,10z M727.1,640.4c23.9,23.9,23.9,62.7,0,86.6C715.1,739,699.4,745,683.8,745s-31.4-6-43.3-17.9L500,586.6L359.6,727.1C347.6,739,331.9,745,316.3,745s-31.4-6-43.3-17.9c-23.9-23.9-23.9-62.7,0-86.6L413.4,500L272.9,359.6c-23.9-23.9-23.9-62.7,0-86.6s62.7-23.9,86.6,0L500,413.4l140.4-140.4c23.9-23.9,62.7-23.9,86.6,0c23.9,23.9,23.9,62.7,0,86.6L586.6,500L727.1,640.4z"})]),t("g"),t("g"),t("g"),t("g"),t("g"),t("g"),t("g"),t("g"),t("g"),t("g"),t("g"),t("g"),t("g"),t("g"),t("g")],-1)),P=[j],Q=f(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"24px",height:"24px",viewBox:"0 0 122.875 122.875","enable-background":"new 0 0 122.875 122.648","xml:space":"preserve"},[t("g",null,[t("path",{"fill-rule":"evenodd",fill:"white","clip-rule":"evenodd",d:"M108.993,47.079c7.683-0.059,13.898,6.12,13.882,13.805 c-0.018,7.683-6.26,13.959-13.942,14.019L75.24,75.138l-0.235,33.73c-0.063,7.619-6.338,13.789-14.014,13.78 c-7.678-0.01-13.848-6.197-13.785-13.818l0.233-33.497l-33.558,0.235C6.2,75.628-0.016,69.448,0,61.764 c0.018-7.683,6.261-13.959,13.943-14.018l33.692-0.236l0.236-33.73C47.935,6.161,54.209-0.009,61.885,0 c7.678,0.009,13.848,6.197,13.784,13.818l-0.233,33.497L108.993,47.079L108.993,47.079z"})])],-1)),q=[Q];function G(e,s,l,p,n,i){return r(),a("div",null,[A,t("div",F,[(r(!0),a(k,null,y(n.resistors,(o,u)=>(r(),a("div",{key:u},[_(t("input",{"onUpdate:modelValue":m=>n.resistors[u]=m,class:"input-field",type:"number",min:"0.01",step:"0.01"},null,8,D),[[h,n.resistors[u],void 0,{number:!0}]]),(r(),a("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"12px",viewBox:"0 0 1000 1000","enable-background":"new 0 0 1000 1000","xml:space":"preserve",class:"del-icon",onClick:m=>i.removeResistor(u)},P,8,H))]))),128)),t("button",{id:"add-button",onClick:s[0]||(s[0]=(...o)=>i.addResistor&&i.addResistor(...o))},q)])])}const I=d(z,[["render",G],["__scopeId","data-v-ae62d85a"]]),K={props:{svgCode:{type:String,default:""},calculating:{type:Boolean,default:!1},resistance:{type:Number,default:null}},emits:["cancel:calculation"],methods:{cancelCalculation(){this.$emit("cancel:calculation")}}},X={class:"result-container"},Y={key:0,class:"calculating"},Z={key:1,class:"resistance-info"},ee=["innerHTML"];function te(e,s,l,p,n,i){return r(),a("div",X,[l.calculating?(r(),a("div",Y,[L(" Calculating... "),t("button",{class:"cancel-button",onClick:s[0]||(s[0]=(...o)=>i.cancelCalculation&&i.cancelCalculation(...o))}," Cancel ")])):R("",!0),l.svgCode!==""?(r(),a("p",Z," Resistance: "+b(l.resistance),1)):R("",!0),t("div",{class:"svg-code",innerHTML:l.svgCode},null,8,ee)])}const S=d(K,[["render",te],["__scopeId","data-v-43fee675"]]);function se(e){return new Worker(""+new URL("resistor-optimization-lon0xTTQ.js",import.meta.url).href,{name:e==null?void 0:e.name})}const ne={components:{ResistorInputList:I,ResistanceTargetInput:w,MaxResistorCountInput:C,ResultSchematic:S},data(){return{resistors:JSON.parse(localStorage.getItem("resistors"))||[1],targetResistance:JSON.parse(localStorage.getItem("targetResistance"))||null,maxResistors:JSON.parse(localStorage.getItem("maxResistors"))||3,svgCalculating:!1,svgCode:"",resistance:0,wasm:null,worker:null}},computed:{isFilled(){return this.resistors.length>0&&!this.resistors.includes(0)&&this.targetResistance>0&&this.maxResistors>0}},watch:{resistors:{deep:!0,handler(e){this.updateResistorList(e)}}},created(){this.initWASMWorker()},methods:{initWASMWorker(){this.worker=new se({type:"module"}),this.worker.onmessage=e=>{this.svgCode=e.data.svg,this.resistance=e.data.resistance,this.svgCalculating=!1},this.updateResistorList(this.resistors)},updateResistorList(e){this.worker.postMessage({type:"updateResistorList",resistors:[...e]})},calculate(){this.svgCalculating=!0,this.svgCode="",this.worker.postMessage({type:"calculate",targetResistance:this.targetResistance,maxResistors:this.maxResistors})},cancelCalculation(){this.worker.terminate(),this.initWASMWorker(),this.svgCalculating=!1}}},ie={class:"container"},oe={class:"input-fields"},re=["disabled"];function ae(e,s,l,p,n,i){const o=w,u=C,m=I,V=S;return r(),a("div",ie,[t("div",oe,[g(o,{modelValue:n.targetResistance,"onUpdate:modelValue":s[0]||(s[0]=c=>n.targetResistance=c)},null,8,["modelValue"]),g(u,{modelValue:n.maxResistors,"onUpdate:modelValue":s[1]||(s[1]=c=>n.maxResistors=c)},null,8,["modelValue"]),g(m,{modelValue:n.resistors,"onUpdate:modelValue":s[2]||(s[2]=c=>n.resistors=c)},null,8,["modelValue"]),t("button",{class:"calculate-button",disabled:!i.isFilled,onClick:s[3]||(s[3]=(...c)=>i.calculate&&i.calculate(...c))}," Calculate ",8,re)]),g(V,{calculating:n.svgCalculating,"svg-code":n.svgCode,resistance:n.resistance,"onCancel:calculation":s[4]||(s[4]=c=>i.cancelCalculation())},null,8,["calculating","svg-code","resistance"])])}const ce=d(ne,[["render",ae],["__scopeId","data-v-b9041023"]]);export{ce as default};
